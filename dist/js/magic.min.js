/*
 Breakout-game 2017-05-04 
*/
var Ball=function(){return{drawBall:function(){Init.breakout.beginPath(),Init.breakout.arc(Init.x,Init.y,Init.ballRadius,0,2*Math.PI),Init.breakout.fillStyle="#0c7702",Init.breakout.fill(),Init.breakout.closePath()}}}(),BrickHit=function(){return{brickHit:function(){for(c=0;c<Init.brickColumnCount;c++)for(r=0;r<Init.brickRowCount;r++)Init.x>Init.bricks[c][r].x&&Init.x<Init.bricks[c][r].x+Init.brickWidth&&Init.y>Init.bricks[c][r].y&&Init.y<Init.bricks[c][r].y+Init.brickHeight&&0!==Init.bricks[c][r].status&&(Init.dy=-Init.dy,Init.bricks[c][r].status=0,Init.score++)}}}(),Bricks=function(){return{drawBricks:function(){for(c=0;c<Init.brickColumnCount;c++)if(!Init.bricks[c])for(Init.bricks[c]=[],r=0;r<Init.brickRowCount;r++)Init.bricks[c][r]={x:0,y:0,status:1};for(c=0;c<Init.brickColumnCount;c++)for(r=0;r<Init.brickRowCount;r++)1==Init.bricks[c][r].status&&(Init.brickX=c*(Init.brickWidth+Init.brickPadding)+Init.brickOffsetLeft,Init.brickY=r*(Init.brickHeight+Init.brickPadding)+Init.brickOffsetTop,Init.bricks[c][r].x=Init.brickX,Init.bricks[c][r].y=Init.brickY,Init.breakout.beginPath(),Init.breakout.rect(Init.brickX,Init.brickY,Init.brickWidth,Init.brickHeight),Init.breakout.fillStyle="#CC4B4B",Init.breakout.fill(),Init.breakout.closePath())}}}(),Elements=function(){return{drawElements:function(){Score.drawScore(),Bricks.drawBricks(),Ball.drawBall(),Paddle.drawPaddle(),BrickHit.brickHit()}}}(),Init=function(){var a=document.getElementById("breakout");return{canvas:a,breakout:a.getContext("2d"),ballRadius:10,x:a.width/2,y:a.height-20,dx:2,dy:-2,paddleHeight:10,paddleWidth:65,paddleX:(a.width-65)/2,rightPressed:!1,leftPressed:!1,brickRowCount:4,brickColumnCount:9,brickX:0,brickY:0,brickWidth:55,brickHeight:20,brickPadding:20,brickOffsetTop:30,brickOffsetLeft:10,bricks:[],score:0}}();!function(){Elements.drawElements(),window.addEventListener("keydown",MovePaddle.movePaddle,!1)}();var MoveBall=function(){return{moveBall:function(){Init.breakout.clearRect(0,0,Init.canvas.width,Init.canvas.height),Elements.drawElements(),(Init.x+Init.dx>Init.canvas.width-Init.ballRadius||Init.x+Init.dx<Init.ballRadius)&&(Init.dx=-Init.dx),Init.y+Init.dy<Init.ballRadius?Init.dy=-Init.dy:Init.y+Init.dy>Init.canvas.height-Init.ballRadius&&(Init.x>Init.paddleX&&Init.x<Init.paddleX+Init.paddleWidth?Init.dy=-Init.dy:(alert("Game over"),document.location.reload())),Init.x+=Init.dx,Init.y+=Init.dy}}}(),MovePaddle=function(){return{movePaddle:function(a){switch(a.keyCode){case 37:Init.paddleX>0?(Init.paddleX-=20,Elements.drawElements()):Init.paddlePosX=Init.paddlePosX;break;case 39:Init.paddleX<Init.canvas.width-Init.paddleWidth?(Init.paddleX+=20,Elements.drawElements()):Init.paddlePosX=Init.paddlePosX;break;case 32:clearInterval(Init.ballInterval),Init.ballInterval=setInterval(MoveBall.moveBall,10)}}}}(),Paddle=function(){return{drawPaddle:function(){Init.breakout.beginPath(),Init.breakout.rect(Init.paddleX,Init.canvas.height-Init.paddleHeight,Init.paddleWidth,Init.paddleHeight),Init.breakout.fillStyle="#0c7702",Init.breakout.fill(),Init.breakout.closePath()}}}(),Score=function(){return{drawScore:function(){Init.breakout.font="16px Arial",Init.breakout.fillStyle="#000000",Init.breakout.fillText("Score: "+Init.score,8,20)}}}();